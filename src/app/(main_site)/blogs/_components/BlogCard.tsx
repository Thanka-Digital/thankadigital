import { TransmitSquare } from "iconsax-react";
import moment from "moment";
import Link from "next/link";

interface BlogCardProps extends BlogModel {
  index: number;
}

const BlogCard = (blog: BlogCardProps) => {
  return (
    <article
      className={`${
        blog.index % 3 === 0
          ? "col-span-2"
          : blog.index % 4 === 0
          ? "col-span-2 lg:col-span-3"
          : "col-span-1"
      }`}
    >
      <Link href={`${blog.url}`}>
        <div
          className={`min-h-[500px] w-full bg-cover bg-no-repeat relative rounded-md bg-center`}
          style={{
            backgroundImage: `url(${
              blog.cover_image ?? `/images/blogs/dev-to-placeholder.jpg`
            })`,
          }}
        >
          <div className="absolute w-full h-full rounded-md bg-black/40"></div>

          <div
            className="absolute p-4 bg-white rounded-md bottom-4 left-4 right-4"
            // style={{
            //   clipPath:
            //     blog.index === 0
            //       ? "polygon( 97.054% 0.022%,16.568% 0.022%,2.946% 0.022%,2.946% 0.022%,2.468% 0.19%,2.015% 0.675%,1.592% 1.453%,1.206% 2.495%,0.863% 3.777%,0.568% 5.271%,0.329% 6.951%,0.15% 8.79%,0.039% 10.763%,0% 12.842%,0% 87.179%,0% 87.179%,0.039% 89.259%,0.15% 91.232%,0.329% 93.071%,0.568% 94.751%,0.863% 96.245%,1.206% 97.526%,1.592% 98.569%,2.014% 99.346%,2.468% 99.832%,2.946% 100%,37.261% 100%,37.261% 100%,37.738% 99.832%,38.192% 99.346%,38.614% 98.569%,39% 97.526%,39.343% 96.245%,39.638% 94.751%,39.877% 93.071%,40.056% 91.232%,40.168% 89.259%,40.206% 87.179%,40.206% 85.189%,40.206% 85.189%,40.245% 83.11%,40.356% 81.137%,40.535% 79.297%,40.774% 77.617%,41.069% 76.124%,41.412% 74.842%,41.798% 73.8%,42.221% 73.022%,42.674% 72.536%,43.152% 72.369%,97.054% 72.369%,97.054% 72.369%,97.532% 72.201%,97.986% 71.715%,98.408% 70.937%,98.794% 69.895%,99.137% 68.613%,99.432% 67.119%,99.671% 65.44%,99.85% 63.6%,99.961% 61.627%,100% 59.548%,100% 12.842%,100% 12.842%,99.961% 10.763%,99.85% 8.79%,99.671% 6.951%,99.432% 5.271%,99.137% 3.777%,98.794% 2.496%,98.408% 1.453%,97.986% 0.676%,97.532% 0.19%,97.054% 0.022%)"
            //       : "polygon( 0% 89.305%,0% 10.695%,0% 10.695%,0.074% 8.96%,0.287% 7.315%,0.629% 5.78%,1.087% 4.379%,1.65% 3.133%,2.307% 2.064%,3.045% 1.194%,3.853% 0.545%,4.72% 0.14%,5.634% 0%,94.225% 0%,94.225% 0%,95.139% 0.14%,96.006% 0.545%,96.814% 1.194%,97.553% 2.064%,98.209% 3.133%,98.772% 4.379%,99.23% 5.78%,99.572% 7.315%,99.785% 8.96%,99.859% 10.695%,99.859% 64.973%,99.859% 64.973%,99.785% 66.708%,99.572% 68.354%,99.23% 69.888%,98.772% 71.29%,98.209% 72.536%,97.553% 73.605%,96.814% 74.475%,96.006% 75.123%,95.139% 75.528%,94.225% 75.668%,82.958% 75.668%,82.958% 75.668%,82.044% 75.808%,81.177% 76.214%,80.369% 76.862%,79.63% 77.732%,78.974% 78.801%,78.411% 80.047%,77.953% 81.449%,77.611% 82.983%,77.398% 84.629%,77.324% 86.364%,77.324% 89.305%,77.324% 89.305%,77.25% 91.04%,77.037% 92.685%,76.695% 94.22%,76.237% 95.621%,75.674% 96.868%,75.017% 97.936%,74.279% 98.806%,73.471% 99.455%,72.604% 99.86%,71.69% 100%,5.634% 100%,5.634% 100%,4.72% 99.86%,3.853% 99.455%,3.045% 98.806%,2.307% 97.936%,1.65% 96.868%,1.087% 95.621%,0.629% 94.22%,0.287% 92.685%,0.074% 91.04%,0% 89.305% )",
            // }}
          >
            <div className="flex flex-col gap-2">
              <h3 className="flex items-center gap-3">
                {blog.title}
                {blog.tag_list.length > 0 && blog.index === 0 ? (
                  <div className="px-4 py-1 text-base text-white bg-black w-fit md:text-xl rounded-2xl">
                    {blog.tag_list[0]}
                  </div>
                ) : null}
              </h3>
              <p>{blog.description}</p>
              <span className="text-sm font-medium">
                ({moment(blog.created_at).fromNow()})
              </span>
              <div className="flex items-center justify-between">
                <span className="text-sm">
                  {blog.reading_time_minutes} min read
                </span>
                <TransmitSquare className="rotate-45" />
              </div>
            </div>
          </div>
        </div>
      </Link>
    </article>
  );
};

export default BlogCard;
